@page "/about"
@using IceNineMedia.Core.Features.About
@using IceNineMedia.Core.Features.Shared
@using IceNineMedia.Core.Features.Shared.Abstractions

@inject IUmbracoHelperService UmbracoHelperService
@inject IHttpContextAccessor ContextAccessor

@code {
    private AboutViewModel? aboutPage = null;

    protected override void OnInitialized()
    {
        var slug = ContextAccessor?.HttpContext?.Request.Path.Value;
        // For whatever reason, Blazor loads components twice
        // Wait until the second time to load the page content
        if (!string.IsNullOrEmpty(slug) && slug.Equals("/_blazor"))
        {
            aboutPage = UmbracoHelperService.GetAboutContent("/about");
        }
    }
}

@if (!string.IsNullOrEmpty(aboutPage?.Title))
{
    <h1>@aboutPage.Title</h1>
}